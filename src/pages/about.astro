---
import BaseLayout from '../layouts/BaseLayout.astro';
import HeroSection from '../components/sections/HeroSection.astro';
import FeatureGrid from '../components/content/FeatureGrid.astro';
import { topics } from '../data/topics';
import { url } from '../utils/path';

const features = [
  {
    icon: 'ğŸ¦€',
    title: 'Rust',
    description: 'æ·±å…¥Rustè¯­è¨€æ ¸å¿ƒæ¦‚å¿µï¼ŒåŒ…æ‹¬æ‰€æœ‰æƒç³»ç»Ÿã€ç”Ÿå‘½å‘¨æœŸã€å¹¶å‘ç¼–ç¨‹ã€async/awaitç­‰',
  },
  {
    icon: 'ğŸ¤–',
    title: 'å¤šæ¨¡æ€Agent',
    description: 'æ¢ç´¢å¤šæ¨¡æ€AI Agentçš„æ¶æ„è®¾è®¡ã€å·¥å…·è°ƒç”¨ã€è§†è§‰æ¨ç†ã€ç¼–æ’æ¡†æ¶ç­‰å‰æ²¿æŠ€æœ¯',
  },
  {
    icon: 'ğŸ',
    title: 'Python',
    description: 'Pythoné«˜çº§ç‰¹æ€§ã€å¼‚æ­¥ç¼–ç¨‹ã€æ•°æ®ç§‘å­¦å·¥å…·é“¾ã€Webæ¡†æ¶ä¸æœ€ä½³å®è·µ',
  },
  {
    icon: 'ğŸ“',
    title: 'æŒç»­æ›´æ–°',
    description: 'çŸ¥è¯†åº“æŒç»­æ›´æ–°ï¼Œä¸æ–­æ‰©å±•æ–°çš„æŠ€æœ¯ä¸»é¢˜å’Œæ·±åº¦æ–‡ç« ',
  },
  {
    icon: 'ğŸ”',
    title: 'æ·±åº¦å‰–æ',
    description: 'æ¯ç¯‡æ–‡ç« æ³¨é‡åŸç†åˆ†æä¸å®è·µç»“åˆï¼Œä¸æ­¢äºè¡¨é¢ä½¿ç”¨',
  },
  {
    icon: 'ğŸŒ',
    title: 'å¼€æ”¾åˆ†äº«',
    description: 'æŠ€æœ¯çŸ¥è¯†æ±‡æ€»ä¸åˆ†äº«ï¼Œæ„å»ºå¯å¤ç”¨çš„å­¦ä¹ èµ„æºä½“ç³»',
  },
];
---

<BaseLayout
  title="å…³äº"
  description="å…³äºçŸ¥è¯†åº“ - æ±‡èšæŠ€æœ¯é¢†åŸŸçš„å­¦ä¹ ç¬”è®°ä¸æ·±åº¦æ–‡ç« "
>
  <HeroSection
    title="å…³äºçŸ¥è¯†åº“"
    subtitle="è®°å½•å­¦ä¹ å†ç¨‹ï¼Œæ²‰æ·€æŠ€æœ¯çŸ¥è¯†ï¼Œåˆ†äº«å®è·µç»éªŒã€‚"
    gradient={true}
  />

  <!-- çŸ¥è¯†åº“ç†å¿µ -->
  <section class="section">
    <div class="container">
      <h2 class="section-title">çŸ¥è¯†åº“æ¶µç›–é¢†åŸŸ</h2>
      <p class="section-description">
        èšç„¦äºå®ç”¨æŠ€æœ¯é¢†åŸŸçš„å­¦ä¹ ç¬”è®°ä¸æ·±åº¦æ–‡ç« 
      </p>
      <FeatureGrid features={features} columns={3} />
    </div>
  </section>

  <!-- å½“å‰ä¸»é¢˜ -->
  <section class="section topics-section">
    <div class="container">
      <h2 class="section-title">å½“å‰ä¸»é¢˜</h2>
      <div class="topics-list">
        {topics.map((topic) => (
          <a href={url(`/topics/${topic.slug}`)} class="topic-item">
            <span class="topic-icon">{topic.icon}</span>
            <div class="topic-info">
              <h3 class="topic-name">{topic.name}</h3>
              <p class="topic-desc">{topic.description}</p>
            </div>
            <span class="topic-count">
              {topic.articles.length > 0 ? `${topic.articles.length} ç¯‡` : 'ç­¹å¤‡ä¸­'}
            </span>
          </a>
        ))}
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  .section {
    padding: var(--space-20) 0;
  }

  .section-title {
    text-align: center;
    font-size: clamp(2rem, 4vw, 3rem);
    margin-bottom: var(--space-4);
    color: var(--text-primary);
  }

  .section-description {
    text-align: center;
    font-size: 1.125rem;
    color: var(--text-secondary);
    max-width: 700px;
    margin: 0 auto var(--space-16);
    line-height: 1.6;
  }

  .topics-section {
    background: var(--surface);
  }

  .topics-list {
    max-width: 800px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
  }

  .topic-item {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    padding: var(--space-6);
    background: var(--background);
    border-radius: var(--radius-lg);
    text-decoration: none;
    transition: all var(--duration-normal) var(--ease-out);
    border-bottom: none !important;
  }

  .topic-item:hover {
    transform: translateX(4px);
    box-shadow: var(--shadow-md);
  }

  .topic-icon {
    font-size: 2.5rem;
    flex-shrink: 0;
  }

  .topic-info {
    flex: 1;
  }

  .topic-name {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--space-1);
  }

  .topic-desc {
    font-size: 0.875rem;
    color: var(--text-secondary);
    line-height: 1.5;
    margin: 0;
  }

  .topic-count {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--primary);
    white-space: nowrap;
  }

  :global([data-theme="motherduck"]) .topic-item {
    border: 2px solid var(--text-primary);
    border-radius: 0;
  }

  :global([data-theme="motherduck"]) .topic-item:hover {
    transform: translate(4px, -4px);
    box-shadow: rgb(56, 56, 56) -6px 6px 0px 0px;
  }
</style>
